package static

import (
	"fmt"
	"math/rand"
	"net/http"

	"github.com/diamondburned/arikawa/v3/utils/sendpart"
	"github.com/starshine-sys/bcr"
)

type meowmoji struct {
	id       string
	animated bool
}

var meows = []meowmoji{{"350320411617263618", false}, {"350401541066194954", false}, {"350452775924269068", false}, {"350676297846095872", false}, {"350680941804388352", false}, {"350734766385004554", false}, {"350753356714606603", false}, {"350785335208181772", false}, {"351090256717807618", false}, {"351097460589854720", false}, {"352818252579078144", false}, {"352818268572221442", false}, {"358328186519420929", false}, {"361151997488922626", false}, {"364799899037859840", false}, {"375685680116006933", false}, {"380802572375818253", false}, {"415956883568984065", false}, {"447075093944860682", false}, {"496818729829531648", false}, {"585552852886356076", false}, {"585786840309694475", false}, {"587999110959988739", false}, {"587999110997606420", false}, {"587999111005995018", false}, {"587999111027097601", false}, {"587999111081361417", false}, {"587999111161315361", false}, {"587999111265910825", false}, {"587999111307984909", false}, {"587999111358185476", false}, {"587999111362379786", false}, {"587999111366836235", false}, {"587999111370899466", false}, {"587999111404322816", false}, {"587999111442071552", false}, {"587999111551385641", false}, {"587999112113422336", false}, {"587999112688041994", false}, {"599204881122852865", false}, {"600787523421208577", false}, {"621634488220385290", false}, {"623818335041224704", false}, {"645414359337664516", false}, {"653601602732818442", false}, {"778573046134865970", false}, {"778613156523278336", false}, {"380069533752360970", false}, {"380069565016834058", false}, {"380070162092654596", false}, {"380070955302780928", false}, {"396448565213396992", false}, {"398175245934133269", false}, {"396451934921555978", false}, {"406922357312192553", false}, {"407202980610310154", false}, {"380089286831374337", false}, {"380110519215980559", false}, {"380404639880839179", false}, {"409770961831854080", false}, {"411237179231174667", false}, {"496335045007638528", false}, {"518800392331722773", false}, {"390962614840328192", false}, {"391358218971906050", false}, {"411236858538754050", false}, {"411239608651874315", false}, {"411254866049237003", false}, {"411644195359424515", false}, {"415588670331027478", false}, {"417357486329298954", false}, {"424575186814369792", false}, {"424585599685623809", false}, {"426067749756862495", false}, {"427470977895759883", false}, {"427472210383601675", false}, {"442778936452055040", false}, {"445892579763159060", false}, {"446287918063943687", false}, {"446307019633459210", false}, {"447074986516021258", false}, {"454580034234089472", false}, {"463767725655719956", false}, {"498772285918937088", false}, {"498772285990240257", false}, {"464048072989868032", false}}

func (bot *Bot) meow(ctx bcr.Contexter) (err error) {
	r := meows[rand.Intn(len(meows)-1)]

	// :fortheloveofgodfiremenow:
	if n := rand.Intn(10000); n == 500 {
		r = meowmoji{"770361452975489146", false}
	}

	url := fmt.Sprintf("https://cdn.discordapp.com/emojis/%v", r.id)
	if r.animated {
		url += ".gif"
	} else {
		url += ".png"
	}
	resp, err := http.Get(url)
	if err != nil {
		return bot.Report(ctx, err)
	}
	defer resp.Body.Close()

	return ctx.SendFiles("", sendpart.File{
		Name:   "meow.png",
		Reader: resp.Body,
	})
}
